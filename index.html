<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- CSS de Bootstrap-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Raleway:wght@700&family=VT323&display=swap');

            :root {
                --bs-body-font-family: 'VT323', monospace;
                --bs-body-color: #1E47E8;
                --bs-body-bg: #ffcb05;
            }
            .graficoaltura {
              max-width: 35%;a height: auto;
              margin-left: auto;
              margin-right: auto;
            }
            .graficopeso {
              max-width: 40%;a height: auto;
              margin-left: auto;
              margin-right: auto;
            }
            .w-100 {
              width: 90% !important;
              height: 600px;
            }
            .centrar{
              margin-left: auto;
              margin-right: auto;
            }
            .carousel-inner img {
              margin: auto;
            }
            h1{
              text-align: center;
            }
        </style>
        <title>Introducción al Desarrollo Front End con HTML, CSS y JavaScript</title>
    </head>
    <body>
        <header>
            <div id="carouselExampleFade" class="carousel slide carousel-fade centrar" data-bs-ride="carousel">
            <div class="carousel-inner">
              <div class="carousel-item active">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/98/International_Pok%C3%A9mon_logo.svg/1200px-International_Pok%C3%A9mon_logo.svg.png" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://www.geekmi.news/__export/1615831536696/sites/debate/img/2021/03/15/ash_y_pikachu_crop1615831407236.jpg_373249645.jpg" class="d-block w-100" alt="...">
              </div>
              <div class="carousel-item">
                <img src="https://media.biobiochile.cl/wp-content/uploads/2021/02/pokemon.jpeg" class="d-block w-100" alt="...">
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
            <div class="container">
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                        <h1 class="display-4 text-center py-2">Pokédex</h1>
                        <h3 class="text-center">Creado por Javiera Carrasco</h3>
                        <h3 class="text-center">Publicado el 12 de Mayo del 2022</h3>
                        <p class="lead">
                          La Pokédex, originalmente solo podía registrar información de los primeros 151 Pokémon que en ese entonces existían (la llamada primera generación de Pokémon: los videojuegos Pokémon Rojo y Azul). Posteriormente, su base de datos se ha ido actualizando hasta ampliar sus opciones de búsqueda y su capacidad para registrar a los 893 Pokémon actuales.
                        </p>
                        <p>
                          La Pokédex, puede registrar información de 2 formas. La primera, cuando el entrenador únicamente ve al pokémon, la Pokédex realiza un escaneo, al detectar al Pokémon, solo almacena su nombre, imagen, gruñido y localización en la región. Mientras que la segunda, cuando un entrenador captura a un Pokémon salvaje, la Pokédex, realiza un análisis intensivo al pokémon logrando mostrar información más detallada como su tipo, peso, estatura y una información breve sobre la criatura.
                        </p>
                    </div>
                </div>
            </div>
        </header>
                <!--Pasajeras y pasajeros-->
                <div class="container">
                <h1> Gráfico de altura de pokemons </h1>
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                <p> Tal vez creas que la mayoría de los pokemones son muy pequeños, pero la verdad es que hay varios que miden más de 1 metro. </p>
              </div>
              </div>
              </div>
                <div class="graficoaltura">
                <div class="accordion-body text-white-50">
                    <div class="col-md-auto mx-auto mb-auto">
                        <canvas id="segundoChart" width="100" height="100"></canvas>
                    </div>
                </div>
            </div>
                <!--Clases-->
                <div class="container">
                <h1> Gráfico de peso de pokemons </h1>
                <div class="row pt-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                <p> ¿Sabías que? la mayoría de los pokemones pesan entre 10 y 50 kg. </p>
              </div>
              </div>
              </div>
                <div class="graficopeso">
                        <div class="accordion-body text-white-50">
                            <div class="col-md-auto mx-auto mb-auto">
                                <canvas id="tercerChart" width="200" height="150"></canvas>
                            </div>
                        </div>
                    </div>
                <!--Fin-->
            </div>
            <div class="col-md-10 mx-auto my-5">
                        <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-5 row-cols-xl-6 g-3 text-center" id="aqui"></div>
                    </div>
            <div class="row">
                <div class="col-sm-10 col-md-8 col-lg-6 mx-auto">
                    <p>Cada entrenador agrega nueva información a su Pokédex al capturar, recibir o intercambiar nuevos Pokémon que no tenía aún registrados.</p>
                </div>

        <aside>
            <div class="container">
                <div class="row py-5">
                    <div class="col-sm-10 col-md-8 col-lg-6 mx-auto small text-center">
                        <p>
                            Fuentes: <a href="https://es.wikipedia.org/wiki/Pok%C3%A9dex">Información extraida de Wikipedia.</a>,
                        </p>
                    </div>
                </div>
            </div>
        </aside>

        <footer>
            <div class="container">
                <div class="row">
                    <div class="col"><p class="text-muted mt-5 text-center small">Bootstrap v5.1 y Charts.js</p></div>
                </div>
            </div>
        </footer>

        <!-- Biblioteca de Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- Biblioteca Chart.js -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"
            integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <!-- Un gran script, que contiene una función asincrónica para ir a buscar un JSON con -->
        <script>
            async function todo() {
              //el fetch
              const consulta = await fetch("https://raw.githubusercontent.com/javicarrascoo/datos/main/datos.json");
              const data = await consulta.json();
              let pokemones = data.pokemon;

              // primer gráfico - tipos
              tipos = {}


              // segundo grafico - tamaño
              let menores_1 = 0;
              let mayores_1 = 0;

              // tercer gráfico - peso de los pokemones
              let menores_1k = 0;
              let menores_10k = 0;
              let menores_50k = 0;
              let mayores_50k = 0;

              // cuatro gráfico - chance de spawn
              let menores_1_s = 0;
              let mayores_1_s = 0;


              pokemones.forEach((d) => {
                // tipos
                let tipo = d.type;
                tipo.forEach((t) => {
                  if (tipos[t] == null){
                    tipos[t] = 0;
                  }
                  else{
                    tipos[t] = tipos[t] + 1;
                  }
                });



                // tamaño
                let altura = parseFloat(d.height);
                if(altura < 1){
                  menores_1++;
                }
                else{
                  mayores_1++;;
                }

                // peso
                let peso = parseFloat(d.weight);
                if (peso < 1){
                  menores_1k++;
                }
                else if(peso < 10){
                  menores_10k++;
                }
                else if(peso < 50){
                  menores_50k++;
                }
                else{
                  mayores_50k++;
                }

                // spawn
                let spawn = d.spawn_chance;
                if(spawn < 1){
                  menores_1_s++;
                }
                else{
                  mayores_1_s++;;
                }

              });

              // tipos
              let large = Object.keys(tipos).length;
              let tipos_colores = []

              for(let i = 0; i < large; i++){
                let r = Math.round(Math.random()*255);
                let b = Math.round(Math.random()*255);
                let g = Math.round(Math.random()*255);
                tipos_colores.push(`rgba(${r}, ${g}, ${b})`);
              }

              // altura
                new Chart(document.getElementById("segundoChart").getContext("2d"), {
                    type: "pie",
                    data: {
                      labels: ["Menores de 1 metro", "Mayores de 1 metro"],
                      datasets: [{ data: [menores_1, mayores_1], label: "altura", backgroundColor: ["#D9B4B2", "#9EBCDA"] }],
                    },
                  options: {
                    animation: false,
                    layout: {
                      padding: 10,
                    }
                  }
                });

              // peso
                new Chart(document.getElementById("tercerChart").getContext("2d"), {
                  type: "bar",
                  data: {
                    labels: ["Menores de 1 Kg", "Entre 1 Kg y 10 Kg", "Entre 10 Kg y 50 Kg", "Mayores a 50 Kg"],
                    datasets: [{ data: [menores_1k, menores_10k, menores_50k, mayores_50k], label: "Pesos", backgroundColor: ["#8CB1E5"] }],
                    },
                  options: {
                    indexAxis: "y",
                    animation: false,
                    layout: {
                      padding: 40,
                    },
                  }
                });
           }
            todo().catch((error) => console.error(error));
            async function otraVisualizacion() {
                   const consulta = await fetch("https://pokeapi.co/api/v2/pokemon?limit=36");
                   const data = await consulta.json();
                   console.log(data.results);
                   let id=1;
                   data.results.forEach((d) => {
                          let url="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/"+id+".png"
                          document.getElementById("aqui").innerHTML += '<div><div class="card shadow-sm"><img class="card-img-top" src="' + url + '"></div></div>';
                          id=id+1;
                   });
               }
               otraVisualizacion();
        </script>
        <!--otro para los extras-->
    </body>
</html>
